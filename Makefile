BANNER = \n [0;38:5:93mâ–ˆâ–ˆâ•—   â–ˆâ–ˆ[0;38:5:99mâ•—[0;38:5:63mâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—[0;38:5:69m [0;38:5:33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆ[0;38:5:39mâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—[0;38:5:38m â–ˆ[0;38:5:44mâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— [0;38:5:43m [0;38:5:49mâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ[0;38:5:48mâ•—[0m\n [0;38:5:93mâ–ˆâ–ˆâ•‘  [0;38:5:99m [0;38:5:63mâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆ[0;38:5:69mâ–ˆ[0;38:5:33mâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆ[0;38:5:39mâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆ[0;38:5:38mâ–ˆâ–ˆ[0;38:5:44mâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆ[0;38:5:43mâ–ˆ[0;38:5:49mâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•[0;38:5:48mâ•â•â•â•[0m\n [0;38:5:93mâ–ˆâ–ˆ[0;38:5:99mâ•‘[0;38:5:63m   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆ[0;38:5:69mâ–ˆ[0;38:5:33mâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆ[0;38:5:39mâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆ[0;38:5:38mâ–ˆâ–ˆ[0;38:5:44mâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ[0;38:5:43mâ–ˆ[0;38:5:49mâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆ[0;38:5:48mâ–ˆâ–ˆâ–ˆâ–ˆâ•—[0m\n [0;38:5:63mâ•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆ[0;38:5:69mâ•‘[0;38:5:33mâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆ[0;38:5:39mâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆ[0;38:5:38mâ•‘â•š[0;38:5:44mâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”[0;38:5:43mâ•[0;38:5:49mâ•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆ[0;38:5:48mâ•— â–ˆâ–ˆâ•”â•â•â•[0m\n [0;38:5:63m â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•[0;38:5:69m [0;38:5:33mâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆ[0;38:5:39mâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆ[0;38:5:38mâ•‘â–ˆ[0;38:5:44mâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘[0;38:5:43mâ–ˆ[0;38:5:49mâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘[0;38:5:48m  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆ[0;38:5:84mâ–ˆ[0;38:5:83mâ–ˆâ–ˆâ•—[0m\n [0;38:5:63m  â•šâ•â•[0;38:5:69mâ•[0;38:5:33mâ•  â•šâ•â•â•šâ•â•[0;38:5:39m  â•šâ•â•â•šâ•â• [0;38:5:38m â•š[0;38:5:44mâ•â•â•šâ•â•     [0;38:5:43mâ•š[0;38:5:49mâ•â•â•šâ•â•  â•šâ•â•[0;38:5:48mâ•šâ•â•  â•šâ•â•â•š[0;38:5:84mâ•[0;38:5:83mâ•â•â•â•â•â•\033[0m\n

WARN=-Wall
OPT=-Os

MCU=atmega328p
CPUFREQ=8000000
DEVINFO=-DF_CPU=$(CPUFREQ) -mmcu=$(MCU)

BUILDDIR=./build
SRCDIR=./src
LIBDIR=./lib

LIBSRC=$(wildcard $(LIBDIR)/*.c)
LIBOBJ=$(LIBSRC:.c=.o)

all:
	@# make build folder if it doesn't exist already
	@mkdir -p ./build
	@printf " $(BANNER)\n"
	avr-gcc $(WARN) $(OPT) $(DEVINFO) -c $(SRCDIR)/main.c -o $(BUILDDIR)/main.o
	avr-gcc $(WARN) $(DEVINFO) -o $(BUILDDIR)/main.elf $(BUILDDIR)/main.o
	avr-objcopy -O ihex $(BUILDDIR)/main.elf $(BUILDDIR)/main.hex

lib: $(LIBOBJ)
	@mkdir -p ./build
	avr-gcc $(WARN) $(OPT) $(DEVINFO) -c $^ -o $@

# makefile not yet updated to compile all files
# avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega328p -c ./src/main.c -o ./build/main.o
# avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega328p -c ./lib/stack.c -o ./build/stack.o
# avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega328p -c ./lib/util.c -o ./build/util.o
# avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega328p -c ./lib/spi.c -o ./build/spi.o
# avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega328p -c ./lib/buffer.c -o ./build/buffer.o
# avr-gcc -Wall -DF_CPU=8000000 -mmcu=atmega328p -o ./build/main.elf ./build/*.o
# avr-objcopy -O ihex ./build/main.elf ./build/main.hex
